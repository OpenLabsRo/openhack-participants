openapi: 3.0.0
info:
  title: Accounts Contract (Registration Webapp)
  version: 1.0.0
paths:
  /accounts/check:
    post:
      summary: Check account by email
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
      responses:
        '200':
          description: Account exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  registered:
                    type: boolean
        '404':
          description: account not found or account not initialized - talk to the administrator
  /accounts/register:
    post:
      summary: Register / set password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Registered
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  account:
                    $ref: '#/components/schemas/Account'
        '404':
          description: account not initialized - talk to the administrator
        '409':
          description: account already registered
        '500':
          description: internal server error
  /accounts/login:
    post:
      summary: Login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Logged in
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  account:
                    $ref: '#/components/schemas/Account'
        '401':
          description: wrong password
        '404':
          description: account not initialized - talk to the administrator
components:
  schemas:
    Account:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        password:
          type: string
        name:
          type: string
        teamID:
          type: string
